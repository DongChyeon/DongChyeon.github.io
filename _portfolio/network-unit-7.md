---
caption: #what displays in the portfolio grid:
  title: 컴퓨터 네트워크 7단원
  subtitle: 무선 모바일 네트워크
  thumbnail: https://velog.velcdn.com/images/dongchyeon/post/1029a2e8-6a96-4fde-a92d-2dbe730ba9a7/image.png
  
#what displays when the item is clicked:
title: 컴퓨터 네트워크 7단원
subtitle: 무선 모바일 네트워크
image: https://velog.velcdn.com/images/dongchyeon/post/1029a2e8-6a96-4fde-a92d-2dbe730ba9a7/image.png #main image, can be a link or a file in assets/img/portfolio
---

## 무선 네트워크의 요소

<img src = "https://velog.velcdn.com/images/dongchyeon/post/1029a2e8-6a96-4fde-a92d-2dbe730ba9a7/image.png" width="100%">

### 무선 호스트

`무선 호스트(wireless host)`는 유선 네트워크의 경우처럼 애플리케이션을 실행하는 종단 시스템 장치다.

예) 스마트폰, 태블릿, 랩탑, 센서 등의 IoT 장치, 가전제품, 자동차, 그 외 인터넷에 연결된 무수히 많은 장치

### 무선 링크

호스트는 `무선 통신 링크(wireless communication link)`를 통해 기지국(base station)이나 다른 무선 호스트에 연결된다.
일반적으로 모바일 기기들을 기지국에 연결하는 데 사용되며, 백본 링크로도 사용된다. 다중 접속 프로토콜은 링크 접속을 조정하는데 사용되며 다양한 데이터 전송률과 전송 거리를 지원한다.

### 기지국

`기지국(base station)`은 기지국에 결합된 무선 호스트와의 데이터(패킷) 송수신에 책임을 진다.
즉, 자신과 결합되어 있는 다수의 무선 호스트들 사이의 전송을 중재하고 조정한다. 주로, 유선 네트워크에 연결되어 있다.

`무선 호스트가 어떤 기지국에 결합(association)되어 있다.`는 것은 아래 두 가지를 의미한다.
* 호스트가 해당 기지국의 무선 통신 영역 안에 있다.
* 호스트가 자신과 네트워크 간의 데이터 중계(relay)를 위해 해당 기지국을 사용한다.

### 인프라스트럭처 방식

기지국에 접속된 호스트는 `인프라스트럭처 방식(infrastructure mode)으로 동작한다`고 한다.
이는 주소 할당이나 라우팅 등 기존의 모든 네트워크 서비스가 기지국을 통해 네트워크에 연결되어 호스트에게 제공되기 때문이다.

이에 반해 `애드혹 네트워크(ad hoc network)`의 경우 무선 호스트는 연결할 수 있는 인프라스트럭처가 없다. (기지국이 없다)
이때 호스트는 스스로 라우팅, 주소 할당, DNS 방식의 이름-주소 변환 등의 서비스를 수행해야 한다.

### 핸드오버 (handover)

이동 호스트가 한 기지국 영역을 벗어나 다른 기지국 영역으로 이동하는 경우, 중심부에 있는 큰 네트워크로의 접속점을 변경(결합된 기지국을 변경)해야 한다.

이 과정을 `핸드오프(handoff)` 또는 `핸드오버(handover)`라고 한다.

### 애드혹 모드 (ad hoc)

기지국이 없는 네트워크에서는 노드들은 직접 연결된 노드들에게만 데이터를 전송할 수 있다. 인프라스트럭처가 존재하지 않기 때문에, 노드들이 자체적으로 조직화되고 다중 홉 통신을 활용하여 연결성을 확립한다. Wi-Fi Direct와 Bluetooth와 같은 기술은 링크 범위 내 노드들 간의 직접적인 통신을 용이하게 한다.

## 무선 네트워크의 종류

### 단일 홉, 인프라스트럭처 존재
* 좀 더 큰 유선 네트워크와 연결된 기지국을 갖고 있다.
* 모든 통신은 이 기지국과 무선 호스트 사이에 단일 무선 홉으로 이루어진다.

### 단일 홉, 인프라스트럭처 없음
* 유선 네트워크가 연결된 기지국이 없다.
* 단일 홉 네트워크 안의 하나의 노드가 다른 노드들의 전송을 중재, 조정할 수 있다.

### 다중 홉, 인프라스트럭처 존재
* 좀 더 큰 네트워크와 연결된 기지국이 존재해야 한다.
* 일부 노드들은 기지국과 통신하기 위해 다른 무선 노드들의 중계를 거쳐야 한다.

### 다중 홉, 인프라스트럭처 없음
* 기지국이 없다.
* 노드들은 메시지를 목적지에 보내기 위해 여러 노드들의 중계를 거칠 수 있다.
* 노드들은 이동성이 있어 노드들 간의 연결성이 변화할 수 있다.
* 이러한 형태의 네트워크는 `이동 애드혹 네트워크(mobile ad hoc network, MANET)`라고 한다.

## 무선 링크와 네트워크의 특징

무선 링크는 유선 링크와 다르게 추가로 고려해야 하는 것들이 존재한다.

### 신호 세기의 감소, 경로 손실
* 전자기파는 물체를 통과함에 따라 약화된다.
* 송신자와 수신자 사이의 거리가 증가함에 따라 신호의 세기가 감소한다.
이런 현상을 `경로 손실(path loss)`라고도 한다.

### 다른 출발지로부터의 간섭
* 동일 주파수 대역으로 전송되는 무선 신호들은 서로 `간섭`하게 된다.
* 이러한 송신자 간의 간섭 외에 주변의 전자기 잡음 등고 간섭을 일으킬 수 있다.

### 다중 경로 전파
송신자와 수신자 간에 전송되는 전자기파의 일부가 물체나 지표에 부딪혀서 서로 길이가 다른 여러 개의 경로를 거쳐갈 때 `다중 경로 전파(multipath propagation) 현상`이 생긴다. 이는 수신 측에서 감지되는 신호를 또렷하지 않게 만든다.

이들을 통해 알 수 있듯이, 유선 링크보다 무선 링크에서 비트 오류가 더 자주 발생한다.
따라서 `강력한 CRC 오류 검출 코드`뿐 만 아니라 손상된 프레임을 재전송해주는 `링크 레벨의 신뢰성 있는 데이터 전송 프로토콜`이 필요하다.

### SNR(Signal-to-Noise Ratio)

* 측정된 수신 신호의 세기와 잡음의 상대적인 비율
* 단위: 데시벨(dB) (수신 신호의 진폭과 잡음의 진폭에 각각 밑이 로그함수를 취한 비율의 20배)
* SNR 값이 커질수록 수신 측에서는 잡음에도 불구하고 원하는 신호를 추출하기 쉬워진다.

### BER(Big Error Rate 비트 오류율)

* 송신된 비트가 수신 측에서 오류로 검출될 확률

### SNR과 BER의 관계

![](https://velog.velcdn.com/images/dongchyeon/post/306815a8-f2c2-4993-be4f-5ff1c5c1a9fa/image.png)

**동일한 변조 기법 내에서는 SNR 값이 높을수록 BER 값이 낮아진다.**

이는 송신자가 출력 세기를 높이면 SNR 값이 커지고, 동시에 수신된 비트에서 오류가 발생할 확률은 낮아지기 때문이다.

**동일한 SNR 값에서는 높은 전송률을 갖는 변조 기법이 더 높은 BER 값을 가진다.**

## 802.11 무선 랜

### 802.11 무선 랜 장치들은 두 종류의 주파수 영역에서 동작한다.

2.4 GHz 대역
* 5.1~5.8 GHz 주파수 영역
* 비허가(unlicnesed) 주파수 대역
* 이 영역에서 802.11 장치들은 2.4 GHz 무선 전화 및 가전제품과 주파수 경쟁을 하게 된다.

5 GHz 대역
* 전력 수준이 동일할 경우 전송 거리가 더 짧고 다중 경로 전파의 영향을 더 많이 받는다.

### 안테나

`802.11n, 802.11ac, 802.11ax 표준`은 `MIMO(multiple input multiple output) 안테나`를 사용한다.
이는 송신과 수신 측에 각각 2개 이상의 안테나가 있어 각기 다른 신호를 송수신하는 방식이다.

* `SU-MIMO` : 안테나당 하나의 유저 할당
* `MU-MIMO` : 안테나를 여러 유저가 공유

## 802.11 WLAN 구조

다음은 802.11 무선 랜 구조의 핵심적인 구성요소를 보여준다.

<img src = "https://velog.velcdn.com/images/dongchyeon/post/32b71c4d-0a8c-44ae-8b41-52ae96cd1352/image.png" width="100%">

### BSS (Basic Service Set)
* 802.11 구조의 가장 근본적인 구성 단위
* 하나 이상의 `무선 단말기`, 하나의 기지국(base station) 즉, `AP(Access Point)`로 이우러짐

### 인프라스트럭처 무선 랜(Infrastructure wireless LAN)
* AP를 가진 무선 랜
* `네트워크 인프라스트럭처` : AP, 그리고 AP를 인터넷 라우터와 연결해주는 유선 이더넷 구조를 통칭한다.

#### 애드혹 네트워크
* 중앙 제어나 외부 네트워크로의 연결 인프라가 없는 경우를 말한다.
* 네트워크는 근접한 이동 장치들 사이의 연결을 통해 즉흥적으로 형성된다.

### 채널과 결합

802.11에서 개별 무선 단말기(호스트)는 네트워크 계층 데이터를 송신 또는 수신하기 전에 하나의 AP와 결합되어 있어야 한다.

호스트는 반드시 AP와 연결되어야 하며 채널을 스캔하며, AP의 이름 (SSID) 및 MAC 주소가 포함된 비콘 프레임을 수신한다. 연결할 AP를 선택하고 인증 절차를 수행한다. 일반적으로 AP의 하위 네트워크에서 IP 주소를 얻기 위해 DHCP를 실행할 것이다.

* 네트워크 관리자가 AP를 설치할 때 AP에서 하나 또는 두 단어로 된 `SSID(Service Set Identifier)`를 할당한다.
* 관리자는 AP에게 `채널 숫자`를 할당해야 한다.
  - 802.11 은 2.4~2.4835 GHz 주파수 범위에서 동작한다.
  - 이 80여 MHz 주파수 대역에서 11개의 일부가 겹치는 채널들을 정의하고 있기에 서로 다른 2개의 채널은 4개 채널 이상의 간격으로 분리되어 있어야만 겹치지 않는다.
  
### 수동적 스캐닝과 능동적 스캐닝

`수동적 스캐닝(passive scanning)` : 비콘 프레임의 수신을 통해 채널을 찾는 과정

<img src = "https://velog.velcdn.com/images/dongchyeon/post/e9a86e83-0ad4-406e-9ce9-f0c52143a154/image.png" width="100%">

1. AP들로부터 비콘 프레임이 전송된다.
2. H1에서 선택된 AP로부터 결합 요청 메시지를 전송한다.
3. 선택된 AP에서 H1으로 결합 수락 메시지를 전송한다.

`능동적 스캐닝(active scanning)` : 무선 스테이션이 영역 안에 있는 AP들에게 탐사용 프로브(probe) 프레임을 방송하는 방식

<img src = "https://velog.velcdn.com/images/dongchyeon/post/5a9ccc0d-ac6c-49c3-afa8-0c3c74c2016d/image.png" width="100%">

1. `탐사용 프로브 프레임`이 H1으로부터 방송된다.
2. AP들로부터 `프로브 응답 메시지`가 도착한다.
3. H!에서 선택된 AP로 결합 요청 메시지를 전송한다.
4. 선택된 AP에서 H1으로 결합 수락 메시지를 전송한다.


### LAN 802.11 속도 적응 (Rate Adaption)

네트워크 조건에 따라 최적의 데이터 전송 속도를 선택하는 과정을 의미한다.
주변 환경의 변화에 따라 데이터 전송 속도를 조정하여 최상의 성능과 안정성을 유지한다. 주변 환경의 요소에는 신호 강도, 대역폭 사용, 잡음 수준, 인접한 기기의 수 등이 포함된다.

`기지국 (base station)`과 모바일 기기는 이동하는 동안 `신호 대 잡음비 (SNR)`이 변화하는 것에 따라 전송 속도를 동적으로 변경한다.

노드가 기지국으로부터 멀어질수록 SNR이 감소하고 비트 오류율(BER)이 증가한다.
BER이 너무 높아지면 전송 속도를 낮추되, 그에 따라 BER에 낮은 값으로 전환한다.

### 802.11 MAC 프로토콜

이더넷이 랜덤 접속 프로토콜이 커다란 성공을 함에 따라 무선 랜에서도 랜덤 접속 프로토콜이 사용된다.
802.11 무선 랜에서 사용되는 랜덤 접속 프로토콜은 `CSMA/CA(Carrier Sense Multiple Accesss with Collision Avoidance)`다.
즉, 스테이션이 전송하기 전에 채널 상태를 감지하고(sense), 만일 채널이 사용 중이면 전송하지 않는다.

이더넷과 802.11의 `MAC 프로토콜`에는 차이가 있다.
802.11은 충돌 검출(collision dection)을 사용하지 않고 `충돌 회피(collision avoidance)` 기술을 사용한다.

### 링크 계층 ACK(Link-Layer Acknowledgement)
무선 랜에서 송신 스테이션이 전송한 프레임은 여러 가지 이유로(숨은 터미널 문제, 신호감쇠 등)으로 목적지 스테이션에 제대로 도달하지 못할 수 있으며, 이를 해결하기 위해 `링크 계층 ACK(Link-Layer Acknowledgement)`를 사용한다.

<img src = "https://velog.velcdn.com/images/dongchyeon/post/3cbeff3b-7575-4da9-b93b-e9391725add2/image.png" width="100%">

1. 목적지 스테이션은 CRC 검사를 통과한 프레임을 수신하면 `SIFS`라는 짧은 시간을 기다린 후에 `ACK 프레임`을 송신 스테이션에게 보낸다.
2. (1) 만약 송신 스테이션이 주어진 시간 동안에 ACK를 수신하지 못하면, 송신 스테이션은 오류가 발생했다고 가정한다.
(2) 송신 스테이션은 다시 `CSMA/CA 프로토콜`을 사용해서 채널 접속을 한 후 프레임을 재전송한다.
3. 일정 횟수만큼의 재전송 후에도 ACK를 수신하지 못하면, 송신 스테이션은 포기하고 프레임을 폐기한다.


여러 무선 송신자와 수신자가 있을 때 다음 문제가 있다.

**숨은 터미널 문제**

<img src = "https://velog.velcdn.com/images/dongchyeon/post/a56e1d91-aa09-4850-b541-b4efbe7a6f16/image.png" width="100%">

위 그림에서 스테이션 H1이 프레임을 AP로 전송하고 있고, H1이 전송하는 도중에 스테이션 H2가 AP로의 전송을 원한다고 가정하자.

H1의 전송을 듣지 못한 H2는 임의의 시간(DIFS)를 기다린 후에 DATA 프레임을 전송하며 충돌이 발생하게 되고, 이에 H1의 전체 전송 시간과 H2의 전체 전송 시간 동안 채널이 낭비된다.

**신호 감쇠**

신호가 전달 매체나 전송 경로를 통과하는 동안 신호 강도 또는 전력이 감소한다.

### 802.11 CSMA/CA 프로토콜

스테이션(무선 장치나 AP)이 전송할 프레임을 갖고 있다고 가정하자.

1. 스테이션은 채널이 사용되지 않음을 감지하면 `DIFS`라는 짧은 시간 동안 기다린 후에 프레임을 전송한다.
2. 그렇지 않고 채널이 사용 중이면 스테이션은 `백오프 방식`에 따라 선택된 임의의 시간 동안 대기한다.
    - DIFS 시간 이후에 채널이 사용되지 않음을 감지하면 선택된 시간의 카운터값은 감소하며, 채널 사용이 감지되면 카운터값을 그대로 고정한다.
3. 카운터가 0에 도달하면 스테이션은 프레임 전체를 전송한 후에 ACK를 기다린다.
    - 카운터가 0에 도달하는 것은 채널이 사용되지 않을 때만 가능하다.
4. (1) ACK를 수신하면 송신 스테이션은 목적지 스테이션에 의해 제대로 수신되었음을 알게 된다.
(2) ACK를 수신하지 못하면 송신 스테이션은 좀 더 증가된 임의의 시간값을 선택한 후, 2단계의 백오프 과정을 수행한다.

이때, DIFS(Distributed Inter-Frame Sapce)가 SIFS(Short Inter-Frame Space) 보다 크기 때문에 ACK 메시지를 방해하지 않는다.

<img src = "https://velog.velcdn.com/images/dongchyeon/post/646be6d3-a14d-481f-919e-20757ecd0ef8/image.png" width="100%">

### 숨은 터미널 해결방안: RTS와 CTS

숨은 터미널 문제를 해결하기 위해 스테이션들이 짧은 `RTS(Request To Send) 제어 프레임`과 `CTS(Clear To Send) 제어 프레임`을 주고받게 함으로써 채널 접속을 예약할 수 있게 한다.

1. 송신자는 DATA 프레임을 전송하고 싶으면, 먼저 `RTS 프레임` 을 BS에게 보냄으로써 DATA프레임과 ACK 프레임을 전송하는 데 필요한 전체 시간을 알려준다.
2. BS가 RTS를 수신하면 이에 대한 응답으로 `CTS 프레임`을 영역 내의 모든 스테이션에게 전송한다. (브로드캐스팅)
    - 송신자에게는 전송할 수 있다는 허가를 알려준다.
    - 다른 스테이션들에게는 예약된 시간 동안 전송하지 못하게 한다.
    
![](https://velog.velcdn.com/images/dongchyeon/post/0e36eca5-ba22-476d-9fee-021c89cf8d0c/image.png)

### IEEE 802.11 프레임의 주소 필드

802.11 프레임의 가장 큰 특징은 4개의 주소 필드를 갖고 있다는 것이다.
각 주소 필드는 6바이트의 MAC 주소를 포함할 수 있다.

왜 주소 필드가 4개나 필요할까?

* `네트워크 연동(internetworking)`을 위해서는 3개의 주소가 필요하다.
  - Address 1: 프레임을 수신하는 무선 스테이션의 MAC 주소
  - Address 2: 프레임을 전송하는 스테이션의 MAC 주소
  - Address 3: 라우터 인터페이스의 MAC주소
 * 네번째 주소는 `애드혹 네트워크 모드`에서 사용된다.
 
### 동일한 IP 서브넷 내에서의 이동성

무선 랜의 물리적 영역을 증가시키기 위해 동일한 IP 서브넷에 여러 개의 BSS를 설치하기도 한다.
따라서 무선 스테이션이 기존 TCP 세션을 유지한 채로 어떻게 한 BSS에서 다른 BSS로 매끄럽게 이동할 수 있는가 하는 이동성 문제가 발생한다.

<img src = "https://velog.velcdn.com/images/dongchyeon/post/ff2a8f93-9929-4848-879a-cf15721d3e9a/image.png" width="100%">

위 그림에서 두 BSS를 연결하는 장치는 라우터가 아니며, 두 BSS에 있는 AP를 포함한 모든 기지국은 동일한 IP 서브넷에 속한다.
따라서 호스트 H1이 BSS1에서 BSS2로 이동할 때 H1의 IP 주소는 동일하게 유지되며, 현재 진행 중인 TCP 연결도 유지될 수 있다.

#### 스위치의 관점

스위치는 `자가학습`을 하고 자동으로 포워딩 테이블을 구성할 수 있다.

* H1이 BSS1에 있으면 H1의 데이터그램은 AP1로 전달되어야 한다.
* H1이 BSS2에 있으면 H1의 데이터그램은 AP2로 전달되어야 한다.

### 802.15: personal area network

* 10m 이내의 거리에서 사용된다.
* 인프라스트럭처가 없는 `애드혹 네트워크`다.
  - 노드들 중 1개의 장치가 master로 지정되며, 나머지는 slave다.
  - slave는 master에게 송신 권한을 요청하고 master는 이를 부여한다.
* 블루투스가 이에 해당
  - 2.4-2.5GHz 대역에서 동작
* 블루투스를 개선하기 위해 Zigbee 개발

## 셀룰러 네트워크

* `셀룰러(celluar)`라는 용어는 셀룰러 네트워크의 영역이 전파 도달 능력에 따라 여러 개의 지리적 영역, 즉 `셀(cell)`로 나뉜다는 사실에서 비롯되었다.
* 각각의 셀은 셀 영역 안의 `이동 장치(mobile device)`와 신호를 주고받는 `기지국(base station)`을 갖고 있다.

### GSM

* FDMA와 TDMA가 혼합된 형태이다.
* 주파수 별로 채널을 분할하고
* 채널별로 타임 슬롯으로 분할한다.

### CDMA

* 각 사용자에게 `고유한 코드(chipping code)`를 할당하여 사용자를 구분한다.
* 송신자는 해당 코드를 적용하여 `(original data) X (chipping code)` 보내고
* 수신자 또한 해당 코드를 사용하여 송신자의 신호를 식별하고 복원한다.

## 이동성 관리: 원칙

### 네트워크 계층의 관점에서 본 다양한 이동성 스펙트럼

<img src = "https://velog.velcdn.com/images/dongchyeon/post/4aef9549-d6f0-4723-b37a-795dfaf52f0f/image.png" width="100%">

### 용어

* `홈 네트워크(home network)`: 개인적인 공간에서 사용되는 네트워크
* `영구 주소(permanent address)`: 인터넷 프로토콜에서 디바이스를 식별하는 주소
* `홈 에이전트(home agent)`: 이동성을 지원하기 위해 사용되는 개념으로 이동중인 사용자의 네트워크 트래픽을 관리한다.
* `케어 오브 어드레스(care-of-address)`: 이동 중인 사용자가 현재 위치에서 사용하는 임시 주소
* `방문 네트워크(visited network)`: 이동 중인 사용자의 현재 위치 네트워크
* `외부 에이전트(foreign agent)`: 방문 네트워크에서 동작하며 이동 중인 사용자의 통신을 지원
* `대응자(correspondent)`: 이동 중인 사용자와 통신하려는 상대방

### Mobile IP

* `간접 라우팅(indirect routing)`: 대응자가 이동 중인 사용자로의 통신을 위해 홈 에이전트를 경유하여 데이터를 전달하는 방식
* `직접 라우팅(direct routing)`: 대응자가 이동 중인 사용자의 외부 주소를 얻어 직접 사용자에게 데이터를 전송하는 방식

### MIP의 세 가지 주요 기능

1. 에이전트 발견
    - 이동 장치가 외부 네트워크에서 사용하기 위한 `CoA(care-of-address)` 사용
2. 홈 에이전트와의 등록
    - MIP는 이동 장치의 홈 에이전트에 CoA를 등록 및 취소하기 위해 이동 장치 및 외부 에이전트에서 사용하는 프로토콜을 정의한다.
3. 데이터그램의 간접 라우팅
    - MIP는 데이터그램이 홈 에이전트에 의해 이동 장치로 전달되는 방식을 정의한다.
    
### GSM: 공통 MSC를 사용한 핸드 오프

이동 중인 사용자가 서로 다른 셀(Cell) 간을 이동할 때 사용되는 기술이다.

핸드오프는 사용자가 통화 또는 데이터 세션을 이동하면서 한 셀에서 다른 셀로 이동할 수 있도록 하는 기능이다.

공통 MSC를 사용한 핸드오프는 여러 셀이 하나의 MSC를 공유하는 상황에서 발생한다. 이 경우, 핸드오프 시에도 사용자의 통화나 데이터 세션은 공통 MSC를 통해 관리된다. 이동 중인 사용자가 한 셀에서 다른 셀로 이동하면, 공통 MSC는 사용자의 세션을 다른 셀로 이전시키고, 통화나 데이터 전송을 계속 유지한다.
